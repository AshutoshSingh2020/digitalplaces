"use strict";(self.webpackChunkcybertools=self.webpackChunkcybertools||[]).push([[57],{7057:(T,h,d)=>{d.r(h),d.d(h,{PdfRotateModule:()=>F});var p=d(6814),u=d(3403),f=d(5861),g=d(4611),t=d(9212),P=d(6223),y=d(9862),_=d(4596),w=d(4777);function x(a,m){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",4),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.downLoad())}),t._uU(2," Download Merge "),t.qZA(),t.BQk()}}function C(a,m){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"button",6),t.NdJ("click",function(){const i=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.rotatePage(i))}),t._uU(3,"rot"),t.qZA(),t.TgZ(4,"pdf-viewer",9),t.NdJ("after-load-complete",function(n){t.CHM(e);const i=t.oxw(2);return t.KtG(i.afterLoadComplete(n))}),t.qZA()(),t.BQk()}if(2&a){const e=m.$implicit,o=t.oxw(2);t.xp6(4),t.Q6J("src",o.pdfSrc)("rotation",180)("render-text",!0)("page",e+1)("original-size",!1)("fit-to-page",!0)("show-all",!1)("show-borders",!0)}}function A(a,m){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",5)(2,"button",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.rotatesAllPages())}),t._uU(3,"All Rotate"),t.qZA(),t.YNc(4,C,5,8,"ng-container",7),t.qZA(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.pdfPages)}}const v=[{path:"",component:(()=>{class a{constructor(e,o){this.fb=e,this.http=o,this.downloadLink=!1,this.rotationArray=[],this.removeArray=[]}ngOnInit(){this.pdfMerge=this.fb.group({pdf:[""]})}onFileSelected(e){var o=this;return(0,f.Z)(function*(){const n=e.map(r=>r.file);if(0===n.length)return;const i=[];for(const r of n){const s=yield o.readFileAsArrayBuffer(r);i.push(new Uint8Array(s))}try{o.mergedPdfData=yield o.rotatePdf(...i);const r=new Blob([o.mergedPdfData],{type:"application/pdf"}),s=URL.createObjectURL(r);o.pdfSrc=s}catch(r){console.error("Error merging PDFs:",r)}})()}readFileAsArrayBuffer(e){return(0,f.Z)(function*(){return new Promise((o,n)=>{const i=new FileReader;i.onload=s=>{s.target?o(s.target.result):n(new Error("Error reading file as ArrayBuffer."))};const r=new Blob([e]);i.readAsArrayBuffer(r)})})()}rotatePdf(...e){var o=this;return(0,f.Z)(function*(){try{o.mergedPdf=yield g.PDFDocument.create();for(const i of e){let r=yield g.PDFDocument.load(i),s=yield o.mergedPdf.copyPages(r,r.getPageIndices());for(let c of s)o.mergedPdf.addPage(c)}return o.pdfPages=o.mergedPdf.getPageIndices(),yield o.mergedPdf.save()}catch(n){throw console.error("Error merging PDFs:",n),n}})()}rotatingPdf(){var e=this;return(0,f.Z)(function*(){if(e.rotationArray.length>0){let n=e.rotationArray.map(r=>r.rotate),i=yield e.mergedPdf.copyPages(e.mergedPdf,n);console.log(i);for(let r=0;r<i.length;r++){let s=i[r],c=e.rotationArray.find(l=>l.rotate===n[r]);if(c){s.setRotation((0,g.degrees)(c.degree));let l=n[r];e.mergedPdf.removePage(l),e.mergedPdf.insertPage(l,i[r])}}}e.pdfPages=e.mergedPdf.getPageIndices();let o=yield e.mergedPdf.save();e.downloadLink=!0,e.mergedPdfData=o})()}downLoad(){var e=this;return(0,f.Z)(function*(){const o=new Blob([e.mergedPdfData],{type:"application/pdf"}),n=document.createElement("a");n.href=URL.createObjectURL(o),n.download="rotate.pdf",e.link=n.href,n.click()})()}rotatePage(e){let o=this.rotationArray.findIndex(n=>n.rotate===e);-1!==o?this.rotationArray[o].degree=(this.rotationArray[o].degree+90)%360:this.addRotationInfo(e,90)}addRotationInfo(e,o){this.rotationArray.push({rotate:e,degree:o})}afterLoadComplete(e){}rotatesAllPages(){for(let e of this.pdfPages)this.rotatePage(e)}static#t=this.\u0275fac=function(o){return new(o||a)(t.Y36(P.qu),t.Y36(y.eN))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-pdf-rotate"]],decls:6,vars:2,consts:[[1,"container"],[3,"sendForm"],[1,"btn",3,"click"],[4,"ngIf"],[3,"click"],[1,"pdfContainer"],[1,"btn","btn-primary",3,"click"],[4,"ngFor","ngForOf"],[1,"pdfView"],[2,"width","100%","height","100%",3,"src","rotation","render-text","page","original-size","fit-to-page","show-all","show-borders","after-load-complete"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"app-choose-file",1),t.NdJ("sendForm",function(r){return n.onFileSelected(r)}),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return n.rotatingPdf()}),t._uU(3,"Rotate PDF"),t.qZA()(),t.YNc(4,x,3,0,"ng-container",3)(5,A,5,1,"ng-container",3)),2&o&&(t.xp6(4),t.Q6J("ngIf",n.downloadLink),t.xp6(1),t.Q6J("ngIf",n.pdfSrc))},dependencies:[p.sg,p.O5,_.U,w.rQ],styles:[".pdfContainer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.pdfView[_ngcontent-%COMP%]{width:200px;height:200px;display:flex;flex-direction:column;overflow:hidden;margin:10px}.pdfView[_ngcontent-%COMP%]   pdf-viewer[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     .ng2-pdf-viewer-container{overflow:hidden!important;width:100%!important;height:100%!important;border:1px solid whitesmoke!important;box-shadow:0 4px 8px #0000001a;box-sizing:border-box}[_nghost-%COMP%]     .ng2-pdf-viewer-container::-webkit-scrollbar{display:none!important}"]})}return a})()}];let R=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(v),u.Bz]})}return a})();var b=d(890);let F=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.oAB({type:a});static#o=this.\u0275inj=t.cJS({imports:[p.ez,R,b.m]})}return a})()}}]);