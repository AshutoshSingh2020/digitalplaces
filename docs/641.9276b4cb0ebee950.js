"use strict";(self.webpackChunkcybertools=self.webpackChunkcybertools||[]).push([[641],{7641:(b,g,s)=>{s.r(g),s.d(g,{PdfRemovePageModule:()=>F});var f=s(6814),p=s(3403),c=s(5861),h=s(4611),e=s(9212),u=s(6223),P=s(9862),v=s(4596),y=s(4777);function w(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",4),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.downLoad())}),e._uU(2," Download PDF "),e.qZA(),e.BQk()}}function _(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7)(2,"button",4),e.NdJ("click",function(){const i=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.removePage(i))}),e._uU(3),e.qZA(),e.TgZ(4,"pdf-viewer",8),e.NdJ("after-load-complete",function(n){e.CHM(t);const i=e.oxw(2);return e.KtG(i.afterLoadComplete(n))}),e.qZA()(),e.BQk()}if(2&r){const t=l.$implicit,o=e.oxw(2);e.xp6(3),e.Oqu(o.removeArray.includes(t)?"Remove":"remoed"),e.xp6(1),e.Q6J("src",o.pdfSrc)("rotation",180)("render-text",!0)("page",t+1)("original-size",!1)("fit-to-page",!0)("show-all",!1)("show-borders",!0)}}function x(r,l){if(1&r&&(e.ynx(0),e.TgZ(1,"div",5),e.YNc(2,_,5,9,"ng-container",6),e.qZA(),e.BQk()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.pdfPages)}}const C=[{path:"",component:(()=>{class r{constructor(t,o){this.fb=t,this.http=o,this.downloadLink=!1,this.removeArray=[]}ngOnInit(){this.pdfMerge=this.fb.group({pdf:[""]})}onFileSelected(t){var o=this;return(0,c.Z)(function*(){const n=t.map(a=>a.file);if(0===n.length)return;if(n.length>1)return void console.warn("Please select 1 file");const i=[];for(const a of n){const d=yield o.readFileAsArrayBuffer(a);i.push(new Uint8Array(d))}try{o.mergedPdfData=yield o.removePdfs(...i);const a=new Blob([o.mergedPdfData],{type:"application/pdf"}),d=URL.createObjectURL(a);o.pdfSrc=d}catch(a){console.error("Error merging PDFs:",a)}})()}readFileAsArrayBuffer(t){return(0,c.Z)(function*(){return new Promise((o,n)=>{const i=new FileReader;i.onload=d=>{d.target?o(d.target.result):n(new Error("Error reading file as ArrayBuffer."))};const a=new Blob([t]);i.readAsArrayBuffer(a)})})()}removePdfs(...t){var o=this;return(0,c.Z)(function*(){try{o.mergedPdf=yield h.PDFDocument.create();for(const i of t){let a=yield h.PDFDocument.load(i),d=yield o.mergedPdf.copyPages(a,a.getPageIndices());for(let m of d)o.mergedPdf.addPage(m)}return o.pdfPages=o.mergedPdf.getPageIndices(),yield o.mergedPdf.save()}catch(n){throw console.error("Error merging PDFs:",n),n}})()}removePages(){var t=this;return(0,c.Z)(function*(){if(t.removeArray.length>0)for(let n=0;n<t.removeArray.length;n++)console.log(t.removeArray[n]),t.mergedPdf.removePage(t.removeArray[n]);let o=yield t.mergedPdf.save();return t.downloadLink=!0,t.mergedPdfData=o,o})()}downLoad(){var t=this;return(0,c.Z)(function*(){let o=new Blob([t.mergedPdfData],{type:"application/pdf"}),n=document.createElement("a");n.href=URL.createObjectURL(o),n.download="remove_pages.pdf",t.link=n.href,n.click()})()}removePage(t){if(this.removeArray.includes(t)){let o=this.removeArray.indexOf(t);this.removeArray.splice(o,1)}else this.removeArray.push(t)}afterLoadComplete(t){}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(u.qu),e.Y36(P.eN))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-pdf-remove-page"]],decls:6,vars:2,consts:[[1,"container"],[3,"sendForm"],[1,"btn",3,"click"],[4,"ngIf"],[3,"click"],[1,"pdfContainer"],[4,"ngFor","ngForOf"],[1,"pdfView"],[2,"width","100%","height","100%",3,"src","rotation","render-text","page","original-size","fit-to-page","show-all","show-borders","after-load-complete"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"app-choose-file",1),e.NdJ("sendForm",function(a){return n.onFileSelected(a)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.removePages()}),e._uU(3,"Remove Pages"),e.qZA()(),e.YNc(4,w,3,0,"ng-container",3)(5,x,3,1,"ng-container",3)),2&o&&(e.xp6(4),e.Q6J("ngIf",n.downloadLink),e.xp6(1),e.Q6J("ngIf",n.pdfSrc))},dependencies:[f.sg,f.O5,v.U,y.rQ],styles:[".pdfContainer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.pdfView[_ngcontent-%COMP%]{width:200px;height:200px;display:flex;flex-direction:column;overflow:hidden;margin:10px}.pdfView[_ngcontent-%COMP%]   pdf-viewer[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     .ng2-pdf-viewer-container{overflow:hidden!important;width:100%!important;height:100%!important;border:1px solid whitesmoke!important;box-shadow:0 4px 8px #0000001a;box-sizing:border-box}[_nghost-%COMP%]     .ng2-pdf-viewer-container::-webkit-scrollbar{display:none!important}"]})}return r})()}];let A=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(C),p.Bz]})}return r})();var R=s(890);let F=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#o=this.\u0275inj=e.cJS({imports:[f.ez,A,R.m]})}return r})()}}]);