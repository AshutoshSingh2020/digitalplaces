"use strict";(self.webpackChunkcybertools=self.webpackChunkcybertools||[]).push([[913],{913:(T,h,d)=>{d.r(h),d.d(h,{PdfMergeModule:()=>b});var g=d(6814),u=d(3403),c=d(5861),p=d(4611),e=d(9212),P=d(6223),y=d(9862),_=d(4596),v=d(4777);function w(i,m){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",4),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.downLoad())}),e._uU(2," Download Merge "),e.qZA(),e.BQk()}}function x(i,m){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7)(2,"button",4),e.NdJ("click",function(){const a=e.CHM(t).$implicit,n=e.oxw(2);return e.KtG(n.rotatePage(a))}),e._uU(3,"rot"),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){const a=e.CHM(t).$implicit,n=e.oxw(2);return e.KtG(n.removePage(a))}),e._uU(5),e.qZA(),e.TgZ(6,"pdf-viewer",8),e.NdJ("after-load-complete",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.afterLoadComplete(o))}),e.qZA()(),e.BQk()}if(2&i){const t=m.$implicit,r=e.oxw(2);e.xp6(5),e.Oqu(r.removeArray.includes(t)?"Remove":"remoed"),e.xp6(1),e.Q6J("src",r.pdfSrc)("rotation",180)("render-text",!0)("page",t+1)("original-size",!1)("fit-to-page",!0)("show-all",!1)("show-borders",!0)}}function A(i,m){if(1&i&&(e.ynx(0),e.TgZ(1,"div",5),e.YNc(2,x,7,9,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.pdfPages)}}const C=[{path:"",component:(()=>{class i{constructor(t,r){this.fb=t,this.http=r,this.downloadLink=!1,this.rotationArray=[],this.removeArray=[]}ngOnInit(){this.pdfMerge=this.fb.group({pdf:[""]})}onFileSelected(t){var r=this;return(0,c.Z)(function*(){const o=t.map(n=>n.file);if(0===o.length)return;const a=[];for(const n of o){const s=yield r.readFileAsArrayBuffer(n);a.push(new Uint8Array(s))}try{r.mergedPdfData=yield r.mergePdfs(...a);const n=new Blob([r.mergedPdfData],{type:"application/pdf"}),s=URL.createObjectURL(n);r.pdfSrc=s}catch(n){console.error("Error merging PDFs:",n)}})()}readFileAsArrayBuffer(t){return(0,c.Z)(function*(){return new Promise((r,o)=>{const a=new FileReader;a.onload=s=>{s.target?r(s.target.result):o(new Error("Error reading file as ArrayBuffer."))};const n=new Blob([t]);a.readAsArrayBuffer(n)})})()}mergePdfs(...t){var r=this;return(0,c.Z)(function*(){try{r.mergedPdf=yield p.PDFDocument.create();for(const a of t){let n=yield p.PDFDocument.load(a),s=yield r.mergedPdf.copyPages(n,n.getPageIndices());for(let f of s)r.mergedPdf.addPage(f)}return r.pdfPages=r.mergedPdf.getPageIndices(),yield r.mergedPdf.save()}catch(o){throw console.error("Error merging PDFs:",o),o}})()}megedPDF(){var t=this;return(0,c.Z)(function*(){if(t.rotationArray.length>0){let o=t.rotationArray.map(n=>n.rotate),a=yield t.mergedPdf.copyPages(t.mergedPdf,o);console.log(a);for(let n=0;n<a.length;n++){let s=a[n],f=t.rotationArray.find(l=>l.rotate===o[n]);if(f){s.setRotation((0,p.degrees)(f.degree));let l=o[n];t.mergedPdf.removePage(l),t.mergedPdf.insertPage(l,a[n])}}}t.pdfPages=t.mergedPdf.getPageIndices();let r=yield t.mergedPdf.save();t.downloadLink=!0,t.mergedPdfData=r})()}removePages(){var t=this;return(0,c.Z)(function*(){if(t.removeArray.length>0)for(let o=0;o<t.removeArray.length;o++)console.log(t.removeArray[o]),t.mergedPdf.removePage(t.removeArray[o]);let r=yield t.mergedPdf.save();return t.downloadLink=!0,r})()}downLoad(){var t=this;return(0,c.Z)(function*(){t.mergedPdfData=yield t.removePages();const r=new Blob([t.mergedPdfData],{type:"application/pdf"}),o=document.createElement("a");o.href=URL.createObjectURL(r),o.download="merged.pdf",t.link=o.href,o.click()})()}rotatePage(t){let r=this.rotationArray.findIndex(o=>o.rotate===t);-1!==r?this.rotationArray[r].degree=(this.rotationArray[r].degree+90)%360:this.addRotationInfo(t,90)}addRotationInfo(t,r){this.rotationArray.push({rotate:t,degree:r})}removePage(t){if(this.removeArray.includes(t)){let r=this.removeArray.indexOf(t);this.removeArray.splice(r,1)}else this.removeArray.push(t)}afterLoadComplete(t){}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(P.qu),e.Y36(y.eN))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-pdf-merge"]],decls:6,vars:2,consts:[[1,"container"],[3,"sendForm"],[1,"btn",3,"click"],[4,"ngIf"],[3,"click"],[1,"pdfContainer"],[4,"ngFor","ngForOf"],[1,"pdfView"],[2,"width","100%","height","100%",3,"src","rotation","render-text","page","original-size","fit-to-page","show-all","show-borders","after-load-complete"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"app-choose-file",1),e.NdJ("sendForm",function(n){return o.onFileSelected(n)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return o.megedPDF()}),e._uU(3,"Meged PDF"),e.qZA()(),e.YNc(4,w,3,0,"ng-container",3)(5,A,3,1,"ng-container",3)),2&r&&(e.xp6(4),e.Q6J("ngIf",o.downloadLink),e.xp6(1),e.Q6J("ngIf",o.pdfSrc))},dependencies:[g.sg,g.O5,_.U,v.rQ],styles:[".pdfContainer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.pdfView[_ngcontent-%COMP%]{width:200px;height:200px;display:flex;flex-direction:column;overflow:hidden;margin:10px}.pdfView[_ngcontent-%COMP%]   pdf-viewer[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     .ng2-pdf-viewer-container{overflow:hidden!important;width:100%!important;height:100%!important;border:1px solid whitesmoke!important;box-shadow:0 4px 8px #0000001a;box-sizing:border-box}[_nghost-%COMP%]     .ng2-pdf-viewer-container::-webkit-scrollbar{display:none!important}"]})}return i})()}];let M=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=e.oAB({type:i});static#r=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(C),u.Bz]})}return i})();var F=d(890);let b=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=e.oAB({type:i});static#r=this.\u0275inj=e.cJS({imports:[g.ez,M,F.m]})}return i})()}}]);