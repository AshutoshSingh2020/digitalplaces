<!-- <div class="fileUploadDiv">
    <label for="formFile" class="form-label"> Please Select File:</label>
    <input class="form-control" type="file" id="upload-doc" accept=".pdf" (change)="uploadFile($event)">
</div> -->


<div class="container">
    <div class="row justify-content-center d-flex">
        <div class="col-10 col-sm-10 col-md-8">
            <div class="cyberTool-file-uploader" dragAndDrop (onFileDropped)="selectFiles($event)">
                <div class="file-uploader-instructions">
                    Drag and drop the file(s) here or click on "Browse Files".
                </div>
                <div class="files-for-upload">
                    <mat-expansion-panel *ngFor="let selectedFile of selectedFiles; let i = index" class="selected-file"
                        hideToggle disabled expanded="{{!!selectedFile.uploadResult}}">
                        <mat-expansion-panel-header>
                            <div class="selected-file-header">
                                <div class="selected-file-name">
                                    {{selectedFile.file.name}}
                                </div>
                                <div class="selected-file-actions">
                                    <button mat-raised-button color="accent" matRipple matTooltip="Upload"
                                        matTooltipPosition="left" aria-label="Upload File" (click)="uploadFile(i)"
                                        [disabled]="selectedFile.isUploadInProgress || selectedFile.uploadResult=='success'">
                                        <span *ngIf="selectedFile.uploadResult!='success'" aria-hidden="true"
                                            class="material-icons">file_upload</span>
                                        <span *ngIf="selectedFile.uploadResult=='success'" aria-hidden="true"
                                            class="material-icons">check</span>
                                    </button>
                                    <button mat-raised-button color="warn" matRipple matTooltip="Cancel"
                                        matTooltipPosition="left" aria-label="Cancel File"
                                        (click)="inititateFileCancel(i)">
                                        <span aria-hidden="true" class="material-icons">clear</span>
                                    </button>
                                </div>
                            </div>
                            <mat-progress-bar *ngIf="selectedFile.isUploadInProgress"
                                mode="indeterminate"></mat-progress-bar>
                        </mat-expansion-panel-header>
                        <div *ngIf="selectedFile.uploadResult=='success'">
                            The file was uploaded successfully.
                        </div>
                        <div *ngIf="!!selectedFile.uploadResult && selectedFile.uploadResult!='success'"
                            class="selected-file-upload-error">
                            {{selectedFile.uploadResult}}
                        </div>
                    </mat-expansion-panel>
                </div>
                <div class="file-upload-options">
                    <form class="file-upload-native-selection" [formGroup]="file_selection_form">
                        <input type="file" #fileSelector formControlName="file_selection"
                            [accept]="config.MIMETypesAccepted" multiple="{{config.isMultipleSelectionAllowed}}">
                    </form>
                    <button mat-raised-button matRipple (click)="openFileSelector()">
                        Select PDF Files
                    </button>
                    <ng-container *ngIf="selectedFiles.length>0">
                        <button mat-raised-button color="accent" matRipple matTooltip="Upload All"
                            matTooltipPosition="above" aria-label="Upload All Files" (click)="uploadAll()"
                            [disabled]="!isAnyFileNotUploaded()">
                            <span aria-hidden="true" class="material-icons">file_upload</span>
                        </button>
                        <button mat-raised-button color="warn" matRipple matTooltip="Cancel All"
                            matTooltipPosition="above" aria-label="Cancel All Files" (click)="initiateCancelAll()">
                            <span aria-hidden="true" class="material-icons">clear</span>
                        </button>
                    </ng-container>
                </div>
            </div>
        </div>
    </div>
</div>